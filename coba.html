<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HOME</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>
<body class="bg-white text-gray-900">

  <!-- Navbar -->
  <nav class="bg-white flex items-center justify-between px-4 py-2 shadow sticky top-0 z-50">
    <div class="flex items-center space-x-4">
      <svg width="60" height="60" viewBox="0 0 101 101" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.625 46.2917H88.375V54.7083H12.625V46.2917ZM12.625 21.0417H88.375V29.4583H12.625V21.0417ZM12.625 71.5417H88.375V79.9583H12.625V71.5417Z" fill="#607D8B"/>
      </svg>
      <div class="text-2xl font-semibold tracking-wider">LLY’OUD</div>
    </div>
    <div class="flex-1 px-4">
      <div class="relative max-w-xl mx-auto">
        <input
          type="text"
          placeholder="Cari disini"
          class="w-full pl-10 pr-4 py-2 rounded-full bg-gray-200 text-sm placeholder-gray-500 focus:outline-none"
        />
        <svg class="absolute left-3 top-2.5 w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M12.9 14.32a8 8 0 111.414-1.414l4.387 4.387a1 1 0 01-1.414 1.414l-4.387-4.387zM14 8a6 6 0 11-12 0 6 6 0 0112 0z" clip-rule="evenodd"/>
        </svg>
      </div>
    </div>
    <div class="flex items-center space-x-5 text-sm text-gray-700">
      <ion-icon name="notifications-circle-outline" size="large"></ion-icon>
      <a href="cart.html" class="hover:underline">
        <ion-icon name="cart-outline" size="large"></ion-icon>
        <span style="color:red" id="keranjang-count">1</span>
      </a>
      <a href="#" id="profileBtn">
        <ion-icon name="person-circle-outline" size="large"></ion-icon>
      </a>
    </div>
  </nav>

  <!-- Section: Promo -->
  <section class="mt-6">
    <div class="relative">
      <img src="../img/banner web 1.jpg" alt="Promo" class="w-full h-auto object-cover" onerror="this.src='fallback.jpg'" />
    </div>
  </section>

  <!-- Produk akan dimuat di sini lewat JS -->
  <section class="p-4">
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mb-6" id="product-grid"></div> 
  </section>

  <!-- Section: Welcome Promo -->
  <!-- (Tetap, tanpa perubahan karena sudah baik) -->
  <!-- [Bagian promo produk Anda tetap seperti sebelumnya] -->

  <!-- Footer -->
  <footer class="bg-gray-50 py-6 text-center">
    <h3 class="text-green-700 font-semibold text-lg mb-2">Ikuti Kami</h3>
    <div class="flex justify-center gap-6 text-3xl mb-2">
      <a href="#"><img src="https://img.icons8.com/color/48/instagram-new.png" alt="Instagram" class="w-8"></a>
      <a href="#"><img src="https://img.icons8.com/color/48/youtube-play.png" alt="YouTube" class="w-8"></a>
      <a href="#"><img src="https://img.icons8.com/color/48/facebook.png" alt="Facebook" class="w-8"></a>
    </div>
    <p class="text-sm text-gray-600">Copyright © 2025 LLY’OUD.</p>
  </footer>

  <!-- Overlay Background -->
  <div id="overlayBg" class="hidden fixed inset-0 bg-black bg-opacity-40 z-40"></div>

  <!-- Profile Popup -->
  <div id="profilePopup" class="hidden fixed inset-0 flex items-center justify-center z-50">
    <div class="bg-[#fef9e7] rounded-md shadow-md w-full max-w-md p-6">
      <div class="flex flex-col items-center mb-6">
        <div class="bg-black rounded-full p-3">
          <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z" />
          </svg>
        </div>
        <h2 class="mt-3 text-lg font-bold text-gray-900 tracking-wide text-center">BALERINA_CAPUCINA</h2>
      </div>

      <!-- Form Profile -->
      <div class="space-y-3 text-sm text-gray-800">
        <div><label class="font-semibold block">Nama</label><input id="nama" type="text" disabled class="w-full rounded-md bg-[#fff8dc] px-3 py-2 border border-gray-300 text-gray-700" /></div>
        <div><label class="font-semibold block">Nomer Telpon</label><input id="telp" type="text" disabled class="w-full rounded-md bg-[#fff8dc] px-3 py-2 border border-gray-300 text-gray-700" /></div>
        <div><label class="font-semibold block">Gmail</label><input id="gmail" type="text" disabled class="w-full rounded-md bg-[#fff8dc] px-3 py-2 border border-gray-300 text-gray-700" /></div>
        <div><label class="font-semibold block">Alamat</label><input id="alamat" type="text" disabled class="w-full rounded-md bg-[#fff8dc] px-3 py-2 border border-gray-300 text-gray-700" /></div>
      </div>

      <!-- Tombol Edit dan Logout -->
      <div class="mt-6 flex justify-between items-center">
        <button id="editBtn" class="text-sm font-semibold text-blue-600 hover:underline">Edit</button>
        <button id="logout" class="text-sm font-semibold hover:underline">Logout →</button>
      </div>
    </div>
  </div>

<!-- JS Section -->
<script>
  // Fetch dan tampilkan produk
  fetch('https://dummyjson.com/products')
    .then(res => res.json())
    .then(data => {
      const products = data.products;
      const container = document.getElementById('product-grid');

      products.forEach(product => {
        const card = document.createElement('div');
        card.className = 'bg-white rounded-xl shadow hover:shadow-lg transition overflow-hidden cursor-pointer';
        card.innerHTML = `
          <img src="${product.thumbnail}" alt="${product.title}" class="w-full h-48 object-cover">
          <div class="p-4">
            <h3 class="text-lg font-semibold mb-1">${product.title}</h3>
            <p class="text-sm text-gray-600 line-clamp-2 mb-2">${product.description}</p>
            <p class="text-teal-700 font-bold text-md mb-2">$${product.price}</p>
            <button class="mt-2 bg-teal-500 text-white px-4 py-2 rounded-full text-sm hover:bg-teal-600">Beli Sekarang</button>
          </div>
        `;
        card.addEventListener('click', () => {
          window.location.href = `product-detail.html?id=${product.id}`;
        });
        container.appendChild(card);
      });
    })
    .catch(err => {
      console.error('Gagal mengambil produk:', err);
    });

  // Profile popup toggle
  const profileBtn = document.getElementById('profileBtn');
  const profilePopup = document.getElementById('profilePopup');
  const overlayBg = document.getElementById('overlayBg');
  const editBtn = document.getElementById('editBtn');
  const nama = document.getElementById('nama');
  const telp = document.getElementById('telp');
  const gmail = document.getElementById('gmail');
  const alamat = document.getElementById('alamat');

  let isProfileVisible = false;

  profileBtn?.addEventListener('click', (e) => {
    e.stopPropagation(); // agar tidak dianggap klik di luar
    isProfileVisible = !isProfileVisible;

    profilePopup.classList.toggle('hidden', !isProfileVisible);
    overlayBg.classList.toggle('hidden', !isProfileVisible);

    if (isProfileVisible) {
      nama.value = localStorage.getItem('profileNama') || "Balerina lala";
      telp.value = localStorage.getItem('profileTelp') || "+62 89078-3460-1220";
      gmail.value = localStorage.getItem('profileGmail') || "balerina_lalala@gmail.com";
      alamat.value = localStorage.getItem('profileAlamat') || "Jl. Melati, Blok c4, simpang raya";
    }
  });

  // Tutup popup jika klik di luar
  window.addEventListener('click', (e) => {
    if (isProfileVisible && !profilePopup.contains(e.target) && e.target !== profileBtn && !profileBtn.contains(e.target)) {
      isProfileVisible = false;
      profilePopup.classList.add('hidden');
      overlayBg.classList.add('hidden');
    }
  });

  // Edit & Simpan data profil
  let editMode = false;
  editBtn.addEventListener('click', () => {
    editMode = !editMode;
    nama.disabled = telp.disabled = gmail.disabled = alamat.disabled = !editMode;
    editBtn.textContent = editMode ? "Simpan" : "Edit";
    if (!editMode) {
      localStorage.setItem('profileNama', nama.value);
      localStorage.setItem('profileTelp', telp.value);
      localStorage.setItem('profileGmail', gmail.value);
      localStorage.setItem('profileAlamat', alamat.value);
    }
  });

  // Logout
  document.getElementById('logout').addEventListener('click', () => {
    localStorage.removeItem('profileNama');
    localStorage.removeItem('profileTelp');
    localStorage.removeItem('profileGmail');
    localStorage.removeItem('profileAlamat');
    alert("Berhasil logout!");
    profilePopup.classList.add('hidden');
    overlayBg.classList.add('hidden');
    isProfileVisible = false;
  });

  // Update keranjang
  function updateKeranjangCount() {
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const totalQty = cart.reduce((sum, item) => sum + (item.quantity || 0), 0);
    const badge = document.getElementById("keranjang-count");
    if (badge) badge.textContent = totalQty;
  }

  document.addEventListener("DOMContentLoaded", updateKeranjangCount);
</script>

</body>
</html>
